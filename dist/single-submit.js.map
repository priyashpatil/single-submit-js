{"version":3,"file":"single-submit.js","sources":["../src/main.ts"],"sourcesContent":["class SingleSubmit {\n    private options: SingleSubmitOptions;\n    static init: (options?: SingleSubmitOptions) => SingleSubmit;\n\n    constructor(options: SingleSubmitOptions = {}) {\n        this.options = options;\n        this.initialize();\n    }\n\n    private initialize(): void {\n        this.injectStyles();\n        this.setupEventListeners();\n    }\n\n    private injectStyles(): void {\n        const style = document.createElement('style');\n\n        // Customize CSS styles using options\n        style.textContent = `\n           .spinner-container-single-submit {\n                display: inline-flex;\n                align-items: center;\n                gap: 0.5rem;\n           }\n           .spinner-border-single-submit {\n                height: 1rem;\n                width: 1rem;\n                border-radius: 50%;\n                animation: 0.75s linear infinite spinner-border-single-submit;\n                border: 0.2rem solid currentColor;\n                border-right-color: transparent;\n           }\n           @keyframes spinner-border-single-submit {\n                to {\n                    transform: rotate(360deg);\n                }\n           }\n           `;\n        document.head.appendChild(style);\n    }\n\n    private setupEventListeners(): void {\n        const singleSubmitForms = document.querySelectorAll<HTMLFormElement>('[data-ss-type=\"single-submit-form\"]');\n\n        // Add event listeners to forms.\n        singleSubmitForms.forEach((singleSubmitForm) => {\n            const submitBtn = singleSubmitForm.querySelector('button[type=\"submit\"]') as HTMLButtonElement;\n            const submitLoadingText = singleSubmitForm.dataset.ssLoadingText || (submitBtn?.innerHTML || '');\n            const indicator = singleSubmitForm.dataset.ssIndicator || `${this.options.processIndicatorClass}`;\n\n            if (submitBtn) {\n                singleSubmitForm.addEventListener('submit', () => this.singleSubmitEvent(submitBtn, submitLoadingText, indicator));\n            }\n        });\n    }\n\n    private singleSubmitEvent(target: HTMLButtonElement, loadingText: string, indicator: string): void {\n        target.innerHTML = `\n            <span class=\"${this.options.containerClass}\">\n                ${loadingText !== '' ? `<span>${loadingText}</span>` : ''}\n                <span class=\"${indicator}\" role=\"status\"></span>\n            </span>\n        `;\n        target.disabled = true;\n    }\n}\n\ninterface SingleSubmitOptions {\n    containerClass?: string;\n    processIndicatorClass?: string;\n}\n\n// Define the init method as a static method within the class\nSingleSubmit.init = function (options: SingleSubmitOptions = {}): SingleSubmit {\n    return new SingleSubmit({\n        containerClass: options.containerClass || 'spinner-container-single-submit',\n        processIndicatorClass: options.processIndicatorClass || 'spinner-border-single-submit'\n    });\n}\n// noinspection JSUnusedGlobalSymbols\nexport default SingleSubmit;\n"],"names":["SingleSubmit"],"mappings":";;;;;;;;EAAA,MAAMA,cAAa;AAAA,IAIf,YAAY,UAA+B,IAAI;AAHvC;AAIJ,WAAK,UAAU;AACf,WAAK,WAAW;AAAA,IACpB;AAAA,IAEQ,aAAmB;AACvB,WAAK,aAAa;AAClB,WAAK,oBAAoB;AAAA,IAC7B;AAAA,IAEQ,eAAqB;AACnB,YAAA,QAAQ,SAAS,cAAc,OAAO;AAG5C,YAAM,cAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoBX,eAAA,KAAK,YAAY,KAAK;AAAA,IACnC;AAAA,IAEQ,sBAA4B;AAC1B,YAAA,oBAAoB,SAAS,iBAAkC,qCAAqC;AAGxF,wBAAA,QAAQ,CAAC,qBAAqB;AACtC,cAAA,YAAY,iBAAiB,cAAc,uBAAuB;AACxE,cAAM,oBAAoB,iBAAiB,QAAQ,mBAAkB,uCAAW,cAAa;AAC7F,cAAM,YAAY,iBAAiB,QAAQ,eAAe,GAAG,KAAK,QAAQ,qBAAqB;AAE/F,YAAI,WAAW;AACM,2BAAA,iBAAiB,UAAU,MAAM,KAAK,kBAAkB,WAAW,mBAAmB,SAAS,CAAC;AAAA,QACrH;AAAA,MAAA,CACH;AAAA,IACL;AAAA,IAEQ,kBAAkB,QAA2B,aAAqB,WAAyB;AAC/F,aAAO,YAAY;AAAA,2BACA,KAAK,QAAQ,cAAc;AAAA,kBACpC,gBAAgB,KAAK,SAAS,WAAW,YAAY,EAAE;AAAA,+BAC1C,SAAS;AAAA;AAAA;AAGhC,aAAO,WAAW;AAAA,IACtB;AAAA,EACJ;AA/DI,gBAFEA,eAEK;AAuEX,EAAAA,cAAa,OAAO,SAAU,UAA+B,IAAkB;AAC3E,WAAO,IAAIA,cAAa;AAAA,MACpB,gBAAgB,QAAQ,kBAAkB;AAAA,MAC1C,uBAAuB,QAAQ,yBAAyB;AAAA,IAAA,CAC3D;AAAA,EACL;;;"}