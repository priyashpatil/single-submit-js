{"version":3,"file":"single-submit.umd.min.cjs","sources":["../../src/main.ts"],"sourcesContent":["class SingleSubmit {\n    private options: SingleSubmitOptions;\n    static init: (options?: SingleSubmitOptions) => SingleSubmit;\n\n    constructor(options: SingleSubmitOptions = {}) {\n        this.options = options;\n        this.initialize();\n    }\n\n    private initialize(): void {\n        this.injectStyles();\n        this.setupEventListeners();\n    }\n\n    private injectStyles(): void {\n        const style = document.createElement('style');\n\n        // Customize CSS styles using options\n        style.textContent = `\n           .spinner-container-single-submit {\n                display: inline-flex;\n                align-items: center;\n                gap: 0.5rem;\n           }\n           .spinner-border-single-submit {\n                height: 1rem;\n                width: 1rem;\n                border-radius: 50%;\n                animation: 0.75s linear infinite spinner-border-single-submit;\n                border: 0.2rem solid currentColor;\n                border-right-color: transparent;\n           }\n           @keyframes spinner-border-single-submit {\n                to {\n                    transform: rotate(360deg);\n                }\n           }\n           `;\n        document.head.appendChild(style);\n    }\n\n    private setupEventListeners(): void {\n        const singleSubmitForms = document.querySelectorAll<HTMLFormElement>('[data-ss-type=\"single-submit-form\"]');\n\n        // Add event listeners to forms.\n        singleSubmitForms.forEach((singleSubmitForm) => {\n            const submitBtn = singleSubmitForm.querySelector('button[type=\"submit\"]') as HTMLButtonElement;\n            const submitLoadingText = singleSubmitForm.dataset.ssLoadingText || (submitBtn?.innerHTML || '');\n            const indicator = singleSubmitForm.dataset.ssIndicator || `${this.options.processIndicatorClass}`;\n\n            if (submitBtn) {\n                singleSubmitForm.addEventListener('submit', () => this.singleSubmitEvent(submitBtn, submitLoadingText, indicator));\n            }\n        });\n    }\n\n    private singleSubmitEvent(target: HTMLButtonElement, loadingText: string, indicator: string): void {\n        target.innerHTML = `\n            <span class=\"${this.options.containerClass}\">\n                ${loadingText !== '' ? `<span>${loadingText}</span>` : ''}\n                <span class=\"${indicator}\" role=\"status\"></span>\n            </span>\n        `;\n        target.disabled = true;\n    }\n}\n\ninterface SingleSubmitOptions {\n    containerClass?: string;\n    processIndicatorClass?: string;\n}\n\n// Define the init method as a static method within the class\nSingleSubmit.init = function (options: SingleSubmitOptions = {}): SingleSubmit {\n    return new SingleSubmit({\n        containerClass: options.containerClass || 'spinner-container-single-submit',\n        processIndicatorClass: options.processIndicatorClass || 'spinner-border-single-submit'\n    });\n}\n// noinspection JSUnusedGlobalSymbols\nexport default SingleSubmit;\n"],"names":["SingleSubmit","constructor","options","__publicField","this","initialize","injectStyles","setupEventListeners","style","document","createElement","textContent","head","appendChild","querySelectorAll","forEach","singleSubmitForm","submitBtn","querySelector","submitLoadingText","dataset","ssLoadingText","innerHTML","indicator","ssIndicator","processIndicatorClass","addEventListener","singleSubmitEvent","target","loadingText","containerClass","disabled","init"],"mappings":"6YAAA,MAAMA,EAIF,WAAAC,CAAYC,EAA+B,IAHnCC,EAAAC,KAAA,WAIJA,KAAKF,QAAUA,EACfE,KAAKC,YACT,CAEQ,UAAAA,GACJD,KAAKE,eACLF,KAAKG,qBACT,CAEQ,YAAAD,GACE,MAAAE,EAAQC,SAASC,cAAc,SAGrCF,EAAMG,YAAc,uqBAoBXF,SAAAG,KAAKC,YAAYL,EAC9B,CAEQ,mBAAAD,GACsBE,SAASK,iBAAkC,uCAGnDC,SAASC,IACjB,MAAAC,EAAYD,EAAiBE,cAAc,yBAC3CC,EAAoBH,EAAiBI,QAAQC,sBAAkBJ,WAAWK,YAAa,GACvFC,EAAYP,EAAiBI,QAAQI,aAAe,GAAGpB,KAAKF,QAAQuB,wBAEtER,GACiBD,EAAAU,iBAAiB,UAAU,IAAMtB,KAAKuB,kBAAkBV,EAAWE,EAAmBI,IAC3G,GAER,CAEQ,iBAAAI,CAAkBC,EAA2BC,EAAqBN,GACtEK,EAAON,UAAY,8BACAlB,KAAKF,QAAQ4B,qCACN,KAAhBD,EAAqB,SAASA,WAAuB,oCACxCN,0DAGvBK,EAAOG,UAAW,CACtB,SA9DA5B,EAFEH,EAEK,QAuEXA,EAAagC,KAAO,SAAU9B,EAA+B,IACzD,OAAO,IAAIF,EAAa,CACpB8B,eAAgB5B,EAAQ4B,gBAAkB,kCAC1CL,sBAAuBvB,EAAQuB,uBAAyB,gCAEhE"}