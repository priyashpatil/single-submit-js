{"version":3,"file":"single-submit.min.js","sources":["../src/main.ts"],"sourcesContent":["class SingleSubmit {\n    private options: SingleSubmitOptions;\n    static init: (options?: SingleSubmitOptions) => SingleSubmit;\n\n    constructor(options: SingleSubmitOptions = {}) {\n        this.options = options;\n        this.initialize();\n    }\n\n    private initialize(): void {\n        this.injectStyles();\n        this.setupEventListeners();\n    }\n\n    private injectStyles(): void {\n        const style = document.createElement('style');\n\n        // Customize CSS styles using options\n        style.textContent = `\n           .spinner-container-single-submit {\n                display: inline-flex;\n                align-items: center;\n                gap: 0.5rem;\n           }\n           .spinner-border-single-submit {\n                height: 1rem;\n                width: 1rem;\n                border-radius: 50%;\n                animation: 0.75s linear infinite spinner-border-single-submit;\n                border: 0.2rem solid currentColor;\n                border-right-color: transparent;\n           }\n           @keyframes spinner-border-single-submit {\n                to {\n                    transform: rotate(360deg);\n                }\n           }\n           `;\n        document.head.appendChild(style);\n    }\n\n    private setupEventListeners(): void {\n        const singleSubmitForms = document.querySelectorAll<HTMLFormElement>('[data-ss-type=\"single-submit-form\"]');\n\n        // Add event listeners to forms.\n        singleSubmitForms.forEach((singleSubmitForm) => {\n            const submitBtn = singleSubmitForm.querySelector('button[type=\"submit\"]') as HTMLButtonElement;\n            const submitLoadingText = singleSubmitForm.dataset.ssLoadingText || (submitBtn?.innerHTML || '');\n            const indicator = singleSubmitForm.dataset.ssIndicator || `${this.options.processIndicatorClass}`;\n\n            if (submitBtn) {\n                singleSubmitForm.addEventListener('submit', () => this.singleSubmitEvent(submitBtn, submitLoadingText, indicator));\n            }\n        });\n    }\n\n    private singleSubmitEvent(target: HTMLButtonElement, loadingText: string, indicator: string): void {\n        target.innerHTML = `\n            <span class=\"${this.options.containerClass}\">\n                ${loadingText !== '' ? `<span>${loadingText}</span>` : ''}\n                <span class=\"${indicator}\" role=\"status\"></span>\n            </span>\n        `;\n        target.disabled = true;\n    }\n}\n\ninterface SingleSubmitOptions {\n    containerClass?: string;\n    processIndicatorClass?: string;\n}\n\n// Define the init method as a static method within the class\nSingleSubmit.init = function (options: SingleSubmitOptions = {\n    containerClass: 'spinner-container-single-submit',\n    processIndicatorClass: 'spinner-border-single-submit'\n}): SingleSubmit {\n    return new SingleSubmit(options);\n}\n\n// noinspection JSUnusedGlobalSymbols\nexport default SingleSubmit;\n"],"names":["SingleSubmit","options","__publicField","style","singleSubmitForm","submitBtn","submitLoadingText","indicator","target","loadingText"],"mappings":"qYAAA,MAAMA,CAAa,CAIf,YAAYC,EAA+B,GAAI,CAHvCC,EAAA,gBAIJ,KAAK,QAAUD,EACf,KAAK,WAAW,CACpB,CAEQ,YAAmB,CACvB,KAAK,aAAa,EAClB,KAAK,oBAAoB,CAC7B,CAEQ,cAAqB,CACnB,MAAAE,EAAQ,SAAS,cAAc,OAAO,EAG5CA,EAAM,YAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAoBX,SAAA,KAAK,YAAYA,CAAK,CACnC,CAEQ,qBAA4B,CACN,SAAS,iBAAkC,qCAAqC,EAGxF,QAASC,GAAqB,CACtC,MAAAC,EAAYD,EAAiB,cAAc,uBAAuB,EAClEE,EAAoBF,EAAiB,QAAQ,gBAAkBC,GAAA,YAAAA,EAAW,YAAa,GACvFE,EAAYH,EAAiB,QAAQ,aAAe,GAAG,KAAK,QAAQ,qBAAqB,GAE3FC,GACiBD,EAAA,iBAAiB,SAAU,IAAM,KAAK,kBAAkBC,EAAWC,EAAmBC,CAAS,CAAC,CACrH,CACH,CACL,CAEQ,kBAAkBC,EAA2BC,EAAqBF,EAAyB,CAC/FC,EAAO,UAAY;AAAA,2BACA,KAAK,QAAQ,cAAc;AAAA,kBACpCC,IAAgB,GAAK,SAASA,CAAW,UAAY,EAAE;AAAA,+BAC1CF,CAAS;AAAA;AAAA,UAGhCC,EAAO,SAAW,EACtB,CACJ,CA/DI,OAAAN,EAFEF,EAEK,QAuEXA,EAAa,KAAO,SAAUC,EAA+B,CACzD,eAAgB,kCAChB,sBAAuB,8BAC3B,EAAiB,CACN,OAAA,IAAID,EAAaC,CAAO,CACnC"}